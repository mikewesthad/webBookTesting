<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" http-equiv="Content-Style-Type"/>
<meta content="pandoc" name="generator"/>
<title>ofBook - C++ 11</title>
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
<link href="../style/bootstrap.min.css" rel="stylesheet">
<link href="../style/style.css" rel="stylesheet" type="text/css"/>
<link href="http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic|Merriweather:400,300,300italic,400italic,700,900,700italic,900italic" rel="stylesheet" type="text/css">
<script src="../javascript/jquery-1.8.3.min.js"></script>
<script src="../javascript/bootstrap.min.js"></script>
<script src="../javascript/navbar.js"></script>
</link></link></head>
<body>
<div class="banner">
<div class="content-wrapper">
<b>Work in progress!</b>
        This is a preliminary version of the <a href="https://github.com/openframeworks/ofBook/" target="_blank">ofBook</a>
</div>
</div>
<div class="content-wrapper">
<nav role="navigation">
<ul id="nav-parts"><li class="group">Foreword<ul><li class="chapter"><a href="foreword.html">Foreword</a><ul><li class="section selected"><a href="#aboutthisbook" target="_top">about this book</a></li><li class="section"><a href="#credits" target="_top">credits</a></li></ul></li></ul></li><li class="group">Basics<ul><li class="chapter"><a href="of_philosophy.html">philosophy</a><ul><li class="section selected"><a href="#ofstructure" target="_top">OF structure</a></li><li class="section"><a href="#projectgenerator" target="_top">project generator</a></li><li class="section"><a href="#handcpp" target="_top">.h and .cpp</a></li><li class="section"><a href="#setupupdatedraw" target="_top">setup/update/draw</a></li><li class="section"><a href="#preprocessorcompilerlinker" target="_top">preprocessor/compiler/linker</a></li></ul></li></ul><ul><li class="chapter"><a href="cplusplus_basics.html">C++ Language Basics</a><ul><li class="section selected"><a href="#lookalive" target="_top">Look Alive!</a></li><li class="section"><a href="#iteration" target="_top">Iteration</a></li><li class="section"><a href="#compilingmyfirstapp" target="_top">Compiling My First App</a></li><li class="section"><a href="#beyondhelloworld" target="_top">Beyond Hello World</a></li><li class="section"><a href="#functions" target="_top">Functions</a></li><li class="section"><a href="#customfunctions" target="_top">Custom Functions</a></li><li class="section"><a href="#encapsulationofcomplexity" target="_top">Encapsulation of Complexity</a></li><li class="section"><a href="#variablespart1" target="_top">Variables (part 1)</a></li><li class="section"><a href="#conclusion" target="_top">Conclusion</a></li><li class="section"><a href="#ps" target="_top">PS.</a></li></ul></li></ul><ul><li class="chapter"><a href="setup_and_project_structure.html">OF structure</a><ul><li class="section selected"><a href="#firstthingsfirst" target="_top">First things first</a></li><li class="section"><a href="#welcometoyournewkitchen" target="_top">Welcome to your new kitchen</a></li><li class="section"><a href="#runningexamples" target="_top">Running examples</a></li><li class="section"><a href="#offolderstructure" target="_top">OF folder structure</a></li></ul></li></ul><ul><li class="chapter"><a href="intro_to_graphics.html">Graphics</a><ul><li class="section selected"><a href="#brusheswithbasicshapes" target="_top">Brushes with Basic Shapes</a></li><li class="section"><a href="#brushesfromfreeformshapes" target="_top">Brushes from Freeform Shapes</a></li><li class="section"><a href="#movingtheworld" target="_top">Moving The World</a></li><li class="section"><a href="#nextsteps" target="_top">Next Steps</a></li></ul></li></ul><ul><li class="chapter"><a href="OOPs!.html">Ooops! = Object Oriented Programming + Classes</a><ul><li class="section selected"><a href="#overview" target="_top">Overview</a></li><li class="section"><a href="#whatisoop" target="_top">What is OOP</a></li><li class="section"><a href="#howtobuildyourownclassessimpleclass" target="_top">How to build your own Classes (simple Class)</a></li><li class="section"><a href="#makeanobjectfromyourclass" target="_top">make an Object from your Class</a></li><li class="section"><a href="#makeobjectsfromyourclass" target="_top">make objects from your Class</a></li><li class="section"><a href="#makemoreobjectsfromyourclass" target="_top">make more Objects from your Class</a></li><li class="section"><a href="#makeevenmoreobjectsfromyourclasspropertiesandconstructors" target="_top">make even more Objects from your Class: properties and constructors</a></li><li class="section"><a href="#makeevenmoreobjectsfromyourclass" target="_top">make even more Objects from your Class</a></li><li class="section"><a href="#makeanddeleteasyouwishusingvectors" target="_top">Make and delete as you wish - using vectors</a></li><li class="section"><a href="#quickintrotopolymorphisminheritance" target="_top">Quick intro to polymorphism (inheritance)</a></li></ul></li></ul></li><li class="group">Approaches<ul><li class="chapter"><a href="animation.html">Animation</a><ul><li class="section selected"><a href="#background" target="_top">Background</a></li><li class="section"><a href="#animationinofusefulconcepts" target="_top">Animation in OF / useful concepts:</a></li><li class="section"><a href="#linearmovement" target="_top">linear movement</a></li><li class="section"><a href="#functionbasedmovement" target="_top">Function based movement</a></li><li class="section"><a href="#simulation" target="_top">Simulation</a></li><li class="section"><a href="#wheretogofurther" target="_top">where to go further</a></li></ul></li></ul><ul><li class="chapter"><a href="data_vis.html">Information Visualization Chapter</a><ul><li class="section selected"><a href="#intro" target="_top">Intro</a></li><li class="section"><a href="#workingwithdatafilesinopenframeworks" target="_top">Working with data files in OpenFrameworks</a></li><li class="section"><a href="#moreusefulfunctionsforworkingwithdata" target="_top">More Useful functions for working with data</a></li><li class="section"><a href="#workingwithapis" target="_top">Working with APIs</a></li><li class="section"><a href="#furtherresources" target="_top">Further resources</a></li><li class="section"><a href="#references" target="_top">References</a></li></ul></li></ul><ul><li class="chapter"><a href="game_design.html">Experimental Game Development in openFrameworks</a><ul><li class="section selected"><a href="#howdogamedevelopersactuallymakegames" target="_top">How do game developers actually make games?</a></li><li class="section"><a href="#sowhatisoscanyway" target="_top">So what is OSC, anyway?</a></li><li class="section"><a href="#ourbasicgamemakingitnotsobasic" target="_top">Our basic game--&amp; making it not-so-basic</a></li></ul></li></ul><ul><li class="chapter"><a href="image_processing_computer_vision.html">Image Processing and Computer Vision</a><ul><li class="section selected"><a href="#preliminariestoimageprocessing" target="_top">Preliminaries to Image Processing</a></li></ul></li></ul></li><li class="group">I/O<ul><li class="chapter"><a href="hardware.html">hardware</a><ul><li class="section selected"><a href="#introduction" target="_top">introduction</a></li><li class="section"><a href="#gettingstartedwithserialcommunication" target="_top">getting started with serial communication</a></li><li class="section"><a href="#digitalandanalogcommunication" target="_top">digital and analog communication</a></li><li class="section"><a href="#usingserialforcommunicationbetweenarduinoandopenframeworks" target="_top">using serial for communication between arduino and openframeworks</a></li><li class="section"><a href="#lightsoncontrollinghardwareviadmx" target="_top">Lights On - controlling hardware via DMX</a></li><li class="section"><a href="#raspberrypigettingyourofappintosmallspaces" target="_top">Raspberry Pi - getting your OF app into small spaces</a></li></ul></li></ul><ul><li class="chapter"><a href="sound.html">Sound</a><ul><li class="section selected"><a href="#gettingstartedwithsoundfiles" target="_top">Getting Started With Sound Files</a></li><li class="section"><a href="#gettingstartedwiththesoundstream" target="_top">Getting Started With the Sound Stream</a></li><li class="section"><a href="#why1to1" target="_top">Why -1 to 1?</a></li><li class="section"><a href="#timedomainvsfrequencydomain" target="_top">Time Domain vs Frequency Domain</a></li><li class="section"><a href="#reactingtoliveaudio" target="_top">Reacting to Live Audio</a></li><li class="section"><a href="#synthesizingaudio" target="_top">Synthesizing Audio</a></li><li class="section"><a href="#audiogotchas" target="_top">Audio Gotchas</a></li></ul></li></ul><ul><li class="chapter"><a href="network.html">Network</a><ul><li class="section selected"><a href="#tcpvsudp" target="_top">TCP vs UDP</a></li><li class="section"><a href="#osc" target="_top">OSC</a></li></ul></li></ul></li><li class="group selected">Advanced topics<ul><li class="chapter"><a href="advanced_graphics.html">Advanced graphics</a><ul><li class="section selected"><a href="#dimmediatemodevsofpolylineofpath" target="_top">2D, immediate mode vs ofPolyline/ofPath</a></li><li class="section"><a href="#d" target="_top">3D</a></li></ul></li></ul><ul><li class="chapter"><a href="math.html">That Math Chapter: From 1D to 4D</a><ul><li class="section selected"><a href="#howartistsapproachmath" target="_top">How Artists Approach Math</a></li><li class="section"><a href="#aboutthischapter" target="_top">About this Chapter</a></li><li class="section"><a href="#onedimensionusingchange" target="_top">One Dimension: Using Change</a></li><li class="section"><a href="#moredimensionssomelinearalgebra" target="_top">More Dimensions: Some Linear Algebra</a></li></ul></li></ul><ul><li class="chapter"><a href="memory.html">Memory in C++</a><ul><li class="section selected"><a href="#computermemoryandvariables" target="_top">Computer memory and variables</a></li><li class="section"><a href="#stackvariablesvariablesinfunctionsvsvariablesinobjects" target="_top">Stack variables, variables in functions vs variables in objects</a></li><li class="section"><a href="#pointersandreferences" target="_top">Pointers and references</a></li><li class="section"><a href="#variablesintheheap" target="_top">Variables in the heap</a></li><li class="section"><a href="#memorystructuresarraysandvectors" target="_top">Memory structures, arrays and vectors</a></li><li class="section"><a href="#othermemorystructureslistsandmaps" target="_top">Other memory structures, lists and maps</a></li><li class="section"><a href="#smartpointers" target="_top">smart pointers</a></li></ul></li></ul><ul><li class="chapter"><a href="threads.html">Threads</a><ul><li class="section selected"><a href="#whatsathreadandwhentouseit" target="_top">What's a thread and when to use it</a></li><li class="section"><a href="#ofthread" target="_top">ofThread</a></li><li class="section"><a href="#threadsandopengl" target="_top">Threads and openGL</a></li><li class="section"><a href="#ofmutex" target="_top">ofMutex</a></li><li class="section"><a href="#externalthreadsanddoublebuffering" target="_top">External threads and double buffering</a></li><li class="section"><a href="#ofscopedlock" target="_top">ofScopedLock</a></li><li class="section"><a href="#pococondition" target="_top">Poco::Condition</a></li><li class="section"><a href="#conclusion" target="_top">Conclusion</a></li></ul></li></ul><ul><li class="chapter"><a href="ios.html">ofxiOS</a><ul><li class="section selected"><a href="#openframeworksoniosdevices" target="_top">OpenFrameworks on iOS devices.</a></li><li class="section"><a href="#intro" target="_top">Intro</a></li><li class="section"><a href="#introtoobjectivec" target="_top">Intro to Objective-C</a></li><li class="section"><a href="#underthehood" target="_top">Under the Hood</a></li><li class="section"><a href="#ofuikit" target="_top">OF &amp; UIKit</a></li><li class="section"><a href="#mediaplaybackandcapture" target="_top">Media Playback and Capture</a></li><li class="section"><a href="#lifehacks" target="_top">Life Hacks</a></li><li class="section"><a href="#appstore" target="_top">App Store</a></li><li class="section"><a href="#casestudies" target="_top">Case Studies</a></li></ul></li></ul><ul><li class="chapter selected"><a href="c++11.html">C++ 11</a><ul><li class="section selected"><a href="#blahblah" target="_top">Blah blah</a></li><li class="section"><a href="#auto" target="_top">auto</a></li><li class="section"><a href="#forthingthings" target="_top">for (thing : things)</a></li><li class="section"><a href="#override" target="_top">override</a></li><li class="section"><a href="#lambdafunctions" target="_top">Lambda functions</a></li></ul></li></ul></li><li class="group">Project breakdowns<ul><li class="chapter"><a href="project_elliot.html">Case Study : Line Segments Space</a><ul><li class="section selected"><a href="#foreward" target="_top">Foreward</a></li><li class="section"><a href="#artiststatement" target="_top">Artist statement</a></li><li class="section"><a href="#digitalemulsion" target="_top">Digital Emulsion</a></li><li class="section"><a href="#technicalsolution" target="_top">Technical solution</a></li><li class="section"><a href="#designtimeapplications" target="_top">Design time applications</a></li></ul></li></ul><ul><li class="chapter"><a href="project_eva.html">Case Study: Choreographies for Humans and Stars</a><ul><li class="section selected"><a href="#projectoverview" target="_top">Project Overview</a></li><li class="section"><a href="#ideationandprototyping" target="_top">Ideation and Prototyping</a></li><li class="section"><a href="#findingthetechnicalsolutions" target="_top">Finding the Technical Solutions</a></li><li class="section"><a href="#developingthevisualizationsoftware" target="_top">Developing the Visualization Software</a></li><li class="section"><a href="#failsafesanddirtyfixes" target="_top">Fail-safes and dirty fixes</a></li><li class="section"><a href="#resultsandreception" target="_top">Results and Reception</a></li></ul></li></ul><ul><li class="chapter"><a href="project_joel.html">Case Study: Anthropocene, an interactive film installation for Greenpeace as part of their field at Glastonbury 2013</a><ul><li class="section selected"><a href="#projectoverview" target="_top">Project Overview</a></li><li class="section"><a href="#theproject" target="_top">The Project</a></li><li class="section"><a href="#development" target="_top">Development</a></li><li class="section"><a href="#showtime" target="_top">Show time</a></li><li class="section"><a href="#postevent" target="_top">Post Event</a></li><li class="section"><a href="#teamandcredits" target="_top">Team and Credits</a></li><li class="section"><a href="#hardwareselection" target="_top">Hardware selection</a></li><li class="section"><a href="#appendix1codestructuremainloop" target="_top">Appendix 1: Code structure, main loop</a></li><li class="section"><a href="#appendix2modeswithscreengrabsandcodeexplanation" target="_top">Appendix 2: Modes, with screen grabs and code explanation</a></li><li class="section"><a href="#appendix3editeddevelopmentnotes" target="_top">Appendix 3: Edited development notes</a></li></ul></li></ul></li><li class="group">Tools<ul><li class="chapter"><a href="version_control_with_git.html">Version control with Git</a><ul><li class="section selected"><a href="#whatisversioncontrolandwhyshouldyouuseit" target="_top">What is version control, and why should you use it?</a></li><li class="section"><a href="#differentversioncontrolsystems" target="_top">Different version control systems</a></li><li class="section"><a href="#introductiontogit" target="_top">Introduction to Git</a></li><li class="section"><a href="#popularguiclients" target="_top">Popular GUI clients</a></li><li class="section"><a href="#conclusion" target="_top">Conclusion</a></li></ul></li></ul><ul><li class="chapter"><a href="ofSketch.html">ofSketch</a><ul><li class="section selected"><a href="#whatisofsketch" target="_top">What is ofSketch?</a></li><li class="section"><a href="#download" target="_top">Download</a></li><li class="section"><a href="#sketchformat" target="_top">Sketch Format</a></li><li class="section"><a href="#remotecoding" target="_top">Remote Coding</a></li><li class="section"><a href="#future" target="_top">Future</a></li></ul></li></ul><ul><li class="chapter"><a href="installation_up_4evr_macosx.html">Installation up 4evr - OSX</a><ul><li class="section selected"><a href="#step1prepyoursoftwareandthecomputer" target="_top">Step 1: Prep your software and the computer</a></li><li class="section"><a href="#step2bootintoyoursoftware" target="_top">Step 2: Boot into your software</a></li><li class="section"><a href="#step3keepitupchamp" target="_top">Step 3: Keep it up (champ!)</a></li><li class="section"><a href="#step4rebootperiodically" target="_top">Step 4: Reboot periodically</a></li><li class="section"><a href="#step5checkinonitfromafar" target="_top">Step 5: Check in on it from afar</a></li><li class="section"><a href="#step6testtesttest" target="_top">Step 6: Test, test, test.</a></li><li class="section"><a href="#additionaltipslogging" target="_top">Additional Tips: Logging</a></li><li class="section"><a href="#memoryleakmurderer" target="_top">Memory leak murderer</a></li><li class="section"><a href="#alternateresources" target="_top">Alternate resources</a></li></ul></li></ul><ul><li class="chapter"><a href="installation_up_4evr_linux.html">Installation up 4evr - Linux</a><ul><li class="section selected"><a href="#someadditionaltricks" target="_top">Some additional tricks:</a></li></ul></li></ul></li></ul>
</nav>
<div class="chapter-content">
<h1 id="c-11">C++ 11</h1>
<p>the following needs readability improvements (flow of text)... i'll take another pass at it soon</p>
<h2 id="blahblah">Blah blah</h2>
<p>C++ is a pretty old language, it's been around since XXX, and perhaps because of that (but certainly for many other reasons), it is often seen as archaic, obtuse, or perhaps just plain rubbish by today's standards. Contrary to that, many people believe that it is still offers the best balance of performance and clarity on the coding high street, and (in part thanks to the success of Unix and its mates) has an incredibly strong ecosystem of 3rd party libraries, device support and general acceptance, even up to the point where current shader languages and CUDA use C++ as their language of choice.</p>
<p>Some more modern languages (such as JavaScript and C#) make programs which run in a very different way to C/C++. They have a 'virtual machine', which is a very different type of computer than the one which crunches electronic signals on a circuit board. The virtual machine receives and processes program instructions like a real machine, but allows for all sorts of ideas which don't directly translate to silicon electronics, such as dynamic typing and reflection. The virtual machine abstracts the constraints of the processor away from the thinking of the programmer.</p>
<p>C/C++ does not have a virtual machine, which (for the time being) often gives it a performance edge over these newer languages. It is quite strict in that ultimately the C code itself (somewhere down the chain) translates 1:1 with processor instructions, the design of the language is inflexible in this way, but clinging to this is the achievement of C++, that code can be both understood naturally by a human, and clearly translate to machine code.</p>
<p>In this chapter we'll look at some of the new patterns in the C++ language introduced in C++11, which retain this promise whilst offering new ways of writing code.</p>
<h2 id="auto"><code>auto</code></h2>
<p>Perhaps the most used, and simplest new pattern in C++11 is <code>auto</code>. You'll love it. And probably won't remember life without it after a day or 2. Consider the following...</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">ofRectangle myRectangle = ofGetCurrentViewport();
ofVec2f rectangleCenter = myRectangle.getCenter();
<span class="dt">float</span> rectangleCenterX = rectangleCenter.x;</code></pre>
<p>In this code block, we are declaring 3 variables: * <code>myRectangle</code> * <code>rectangleCenter</code> * <code>rectangleCenterX</code></p>
<p>On each line of code we are:</p>
<ol style="list-style-type: decimal">
<li>Getting a variable on the right hand side. which is of a certain type (<code>ofRectangle</code>, <code>ofVec2f</code>, <code>float</code> respectively)</li>
<li>Declaring a new variable which is explicitly typed to match the value on the right</li>
<li>Assigning the value to the variable</li>
</ol>
<p>What we may notice, is that the type of data on the right and left side of the <code>=</code> is the same. Since C++ is strictly typed (e.g. a function which returns a <code>float</code> will always return a <code>float</code> no matter what), it is impossible for the value on the right hand side to ever be anything different. The compiler <strong>knows</strong> what type of value the right hand will give, e.g. it knows that on line 1 that on the right hand side of the <code>=</code> is an <code>ofRectangle</code>. So perhaps if we were to write something like:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">auto</span> myRectangle = ofGetCurrentViewport();
<span class="kw">auto</span> rectangleCenter = myRectangle.getCenter();
<span class="kw">auto</span> rectangleCenterX = rectangleCenter.x;</code></pre>
<p>Then the compiler can do some of the coding for us. In fact, thanks to <code>auto</code>, we can do this now. This code block compiles to exactly the same result as the first code block did. The compiler notices what's on the right hand side and substitutes in the correct type wherever it sees <code>auto</code>.</p>
<h4 id="how-this-helps">How this helps</h4>
<p>Well obviously auto's going to save you keystrokes. Imagine the following:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">vector&lt;shared_ptr&lt;ofThread&gt; &gt; myVectorOfThreads;</code></pre>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="co">// the old way</span>
vector&lt;shared_ptr&lt;ofThread&gt;&gt;::iterator firstThreadIterator = <span class="kw">this</span>-&gt;myVectorOfThreads.begin();

<span class="co">// the new way</span>
<span class="kw">auto</span> firstThreadIterator = <span class="kw">this</span>-&gt;myVectorOfThreads.begin();</code></pre>
<p>Now this makes the code more readable (by decent humans), but also you could take advantage of <code>auto</code> in other ways, for example you could make changes things in the h file, and the cpp file code would automatically correct itself. For example in the h you might change the <code>vector</code> to a <code>list</code>, or change <code>shared_ptr&lt;ofThread&gt;</code> to <code>ofThread *</code>. These changes would perpetuate automatically to wherever an <code>auto</code> is listening out in the code. Nifty huh?</p>
<h3 id="watch-out-for-this">Watch out for this</h3>
<h4 id="auto-is-not-a-new-type"><code>auto</code> is not a new type</h4>
<p>Note that the following doesn't work:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">auto</span> myRectangle = ofGetCurrentViewport();
myRectangle = <span class="st">"look mum! i'm a string!!"</span>; <span class="co">// compiler error!</span></code></pre>
<p>Remember that <code>auto</code> isn't a type itself, it's not a magic container that can take any kind of thing (such as <code>var</code> in C# or another dynamic typed language), it is simply a keyword which gets substituted at compile time, you can imagine that the compiler just writes in for you whatever makes sense on that line where it is. In this case, the first line makes sure that <code>myRectangle</code> is an <code>ofRectangle</code>, and you can't assign a <code>string</code> to an <code>ofRectangle</code>.</p>
<h4 id="you-cant-use-auto-in-function-arguments">You can't use <code>auto</code> in function arguments</h4>
<p>Since the <code>auto</code> must be implicitly defined by the line of code where it is used, and that this decision is made at compile time, it can not be a function argument, let's see what that means..</p>
<p>Imagine that the following was valid: (<strong>NOTE</strong> : it isn't!)</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">float</span> multiplyBy2(<span class="kw">auto</span> number) {
	<span class="kw">return</span> number * <span class="dv">2</span>;
}

<span class="dt">int</span> firstNumber = <span class="dv">1</span>;
<span class="dt">float</span> secondNumber = <span class="fl">2.</span><span class="er">0f</span>;

cout &lt;&lt; multiplyBy2(firstNumber) &lt;&lt; endl;
cout &lt;&lt; multiplyBy2(secondNumber) &lt;&lt; endl;</code></pre>
<p>Now if this code were valid, then the first time the function is called, the <code>auto</code> would mean <code>int</code>, and the second time it would mean <code>float</code>. Therefore saying that the text <code>auto</code> is simply substituted with an explicit type where it is written doesn't make sense. So basically <strong>you can't use <code>auto</code> in function arguments</strong> (you might want to look into <code>template</code> instead, which would automatically generate 2 pieces of code for the 2 different types).</p>
<h4 id="you-cant-use-auto-as-a-function-return-type">You can't use <code>auto</code> as a function return type</h4>
<p>I'm not sure why, you just can't. It kinda makes sense that you should be able to, but you just can't, move along :).</p>
<h3 id="const-and-references"><code>const</code> and references</h3>
<p>Let's do a <code>const auto</code>:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">ofRectangle rectangle = ofGetCurrentViewport();
<span class="co">//is the same as</span>
<span class="kw">auto</span> rectangle = ofGetCurrentViewport();

<span class="co">//and</span>

<span class="dt">const</span> ofRectangle rectangle = ofGetCurrentViewport();
<span class="co">//is the same as</span>
<span class="dt">const</span> <span class="kw">auto</span> rectangle = ofGetCurrentViewport();</code></pre>
<p>Next look at <code>auto &amp;</code> for when we want reference types.</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">float</span> x = rectangle.x;
<span class="co">//is the same as</span>
<span class="kw">auto</span> x = rectangle.x;

<span class="co">//and</span>

<span class="dt">float</span> &amp; x = rectangle.x;
<span class="co">//is the same as</span>
<span class="kw">auto</span> &amp; x = rectangle.x;</code></pre>
<h3 id="summary">Summary</h3>
<ul>
<li>Save keystrokes by using <code>auto</code> in variable declarations</li>
<li><code>auto</code> takes the type of the right hand side of the <code>=</code> assignment, and replaces the text <code>auto</code> with that type at compile time.</li>
<li><code>auto</code> is not a magic container which can carry any type of data, it simply gets replaced at compile time by whatever is implied in the code</li>
<li>You can't use <code>auto</code> in function arguments, return types and a few other places.</li>
<li>Use <code>const auto</code> for a const type, and <code>auto &amp;</code> for a reference type</li>
</ul>
<h2 id="forthingthings">for (thing : things)</h2>
<p>Consider the following common pattern:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">vector&lt;ofPixels&gt; mySelfies;
<span class="co">/*</span>
<span class="co">take some sexy snaps</span>
<span class="co">*/</span>

<span class="co">//oh dear, my photos are all in portrait</span>
<span class="kw">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;mySelfies.size(); i++) { 
	<span class="co">//rotate them from landscape to portrait</span>
	mySelfies[i].rotate90(<span class="dv">1</span>); 
}

vector&lt;ofxSnapChat::Friend&gt; myFriends = snapChatClient.getFriends();

<span class="co">//now let's send them to all my friends</span>
<span class="kw">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;myFriends.size(); i++) {
	<span class="kw">if</span> (myFriends[i].isHot()) {
		<span class="kw">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;mySelfies.size(); i++) { 
			myFriends[i].sendImage(mySelfies[i]);
		}
	}
}</code></pre>
<p>Well we're forever doing things like <code>for(int i=0; i&lt;mySelfies.size(); i++) {</code>, so let's see if we can find a neater way of doing this with <code>for thing in things</code> which in C++11 we can write as <code>for (thing : things)</code>...</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">vector&lt;ofPixels&gt; mySelfies;
<span class="co">/*</span>
<span class="co">take some sexy snaps</span>
<span class="co">*/</span>

<span class="co">//oh dear, my photos are all in portrait</span>
<span class="kw">for</span>(<span class="kw">auto</span> &amp; mySelfie : mySelfies) { 
	<span class="co">//rotate them from landscape to portrait</span>
	mySelfie.rotate90(<span class="dv">1</span>); <span class="co">// (1)</span>
}

<span class="kw">auto</span> myFriends = snapChatClient.getFriends();

<span class="co">//now let's send them to all my friends</span>
<span class="kw">for</span>(<span class="kw">auto</span> &amp; myFriend : myFriend) { 
	<span class="kw">if</span> (myFriend.isHot()) {
		<span class="kw">for</span>(<span class="kw">auto</span> &amp; mySelfie : mySelfies) {
			myFriend.sendImage(mySelfie); <span class="co">// (2)</span>
		}
	}
}</code></pre>
<p>Notice that <code>for(thing : things)</code> gels so well with <code>auto</code>. Also notice that I'm using <code>auto &amp;</code> since:</p>
<ul>
<li>At <code>(1)</code> I want to be able to change the contents of the vector, so I need a reference to the vector item rather than a copy of it.</li>
<li>At <code>(2)</code>, it makes more sense to use a reference rather than a copy because it's computationally cheaper, and means I don't have to allocate new instances of <code>ofxSnapChat::Friend</code> (which I presume is quite a complex object, since it can do things like send images over the internet, and understand societal dispositions of what it means to be attractive).</li>
</ul>
<h3 id="summary-1">Summary</h3>
<ul>
<li>Use <code>for(auto thing : vectorOfThings)</code></li>
<li>This works with all the STL containers (<code>vector</code>, <code>map</code>, <code>list</code>, <code>deque</code>, <code>set</code>, etc) and in some more purpose built containers (e.g. <code>ofxGrayCode::DataSet</code>)</li>
<li>Often you'll want to do <code>for(auto &amp; thing : vectorOfThings)</code> to use a reference rather than a copy</li>
</ul>
<h2 id="override">override</h2>
<p><code>override</code> saves you time not by reducing the amount of typing you do, but by reducing the amount of head-scratching you might do when dealing with <code>virtual</code> functions. Imagine the following:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">class</span> BuildingProjectionMapper {
<span class="kw">public</span>:
<span class="co">//...</span>
    <span class="kw">virtual</span> <span class="dt">void</span> mapTheGreekColumns();
<span class="co">//...</span>
};

<span class="kw">class</span> AutoBuildingProjectionMapper : <span class="kw">public</span> BuildingProjectionMapper {
<span class="kw">public</span>:
	<span class="dt">void</span> mapTheGreekColums(); <span class="co">// woops, I spelt column incorrectly</span>
};</code></pre>
<p>Now if I implement <code>AutoBuildingProjectionMapper::mapTheGreekColums</code>, it may never get called, and I may be wondering why my function calls are all being handled by the base class. The problem is that the compiler never told me that the function that I was trying to override didn't exist. Here comes <code>override</code> to the rescue.</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">class</span> AutoBuildingProjectionMapper : <span class="kw">public</span> BuildingProjectionMapper {
<span class="kw">public</span>:
	<span class="dt">void</span> mapTheGreekColums() <span class="kw">override</span>;
};</code></pre>
<p>This tells the compiler that I'm intending to override a <code>virtual</code> function. In this case, the compiler will tell me that no <code>virtual</code> function called <code>mapTheGreekColums</code> exists, and that therefore my <code>override</code> is faulty. So following the compiler's complaint I can go in and fix the spelling mistake. Then I can get on with making my Projection Mappening on the town library facade.</p>
<h3 id="summary-2">Summary</h3>
<ul>
<li>Use the keyword <code>override</code> at the end of function definitions in a derived class' h file when you are intending to override a <code>virtual</code> function in the base <code>class</code></li>
<li>The compiler will warn you if your <code>override</code> is invalid, which might just save you a lot of time hunting for errors</li>
</ul>
<h2 id="lambdafunctions">Lambda functions</h2>
<h3 id="worker-threads">Worker threads</h3>
<h3 id="callbacks">Callbacks</h3>
<h3 id="summary-3">Summary</h3>
<div class="footer">
<div id="prev_chapter"><a href="ios.html">&lt; ofxiOS</a></div>
<div id="next_chapter"><a href="project_elliot.html">Case Study : Line Segments Space &gt;</a></div>
</div>
</div>
</div>
</body>
</html>
